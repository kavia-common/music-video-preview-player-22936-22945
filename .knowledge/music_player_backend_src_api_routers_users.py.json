{"is_source_file": true, "format": "Python", "description": "This source file defines API routes related to user authentication and profile management for a FastAPI backend, including signup, login, and profile retrieval.", "external_files": ["../services/auth", "../storage/memory", "../core/security"], "external_methods": ["hash_password", "verify_password", "create_token", "decode_token"], "published": ["signup", "login", "me"], "classes": [{"name": "UserPublic", "description": "A Pydantic model representing a user's public profile information."}, {"name": "SignupRequest", "description": "A Pydantic model for user signup request data."}, {"name": "LoginRequest", "description": "A Pydantic model for user login request data."}, {"name": "AuthResponse", "description": "A Pydantic model for the authentication response containing the token and user info."}], "methods": [{"name": "UserPublic get_current_user(credentials: Optional[HTTPAuthorizationCredentials] = Depends(security))", "description": "Dependency function that retrieves the current authenticated user based on the provided bearer token.", "scope": "", "scopeKind": ""}, {"name": "signup(body: SignupRequest)", "description": "Endpoint to create a new user account and return an authentication token.", "scope": "", "scopeKind": ""}, {"name": "login(body: LoginRequest)", "description": "Endpoint for user authentication, returning an access token.", "scope": "", "scopeKind": ""}, {"name": "me(current: UserPublic = Depends(get_current_user))", "description": "Endpoint to retrieve the profile information of the currently authenticated user.", "scope": "", "scopeKind": ""}], "calls": ["decode_token", "hash_password", "create_token", "verify_password"], "search-terms": ["FastAPI user authentication", "signup endpoint", "login endpoint", "get current user profile", "token creation", "user profile retrieval"], "state": 2, "file_id": 6, "knowledge_revision": 14, "git_revision": "", "ctags": [{"_type": "tag", "name": "AuthResponse", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^class AuthResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SignupRequest", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^class SignupRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserPublic", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^class UserPublic(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    access_token: str = Field(..., description=\"Bearer token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    display_name: str = Field(..., description=\"Display name for the user\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    display_name: str = Field(..., min_length=1, description=\"Profile display name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Email address\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Email for login\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Email for signup\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^def get_current_user(credentials: Optional[HTTPAuthorizationCredentials] = Depends(security)) ->/", "language": "Python", "typeref": "typename:UserPublic", "kind": "function", "signature": "(credentials: Optional[HTTPAuthorizationCredentials] = Depends(security))"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    id: str = Field(..., description=\"User ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^def login(body: LoginRequest):$/", "language": "Python", "kind": "function", "signature": "(body: LoginRequest)"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^def me(current: UserPublic = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(current: UserPublic = Depends(get_current_user))"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    password: str = Field(..., description=\"Password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Password with at least 6 chars\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "security", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^security = HTTPBearer(auto_error=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^def signup(body: SignupRequest):$/", "language": "Python", "kind": "function", "signature": "(body: SignupRequest)"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    token_type: str = Field(\"bearer\", description=\"Token type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/users.py", "pattern": "/^    user: UserPublic = Field(..., description=\"Logged in user\")$/", "language": "Python", "typeref": "typename:UserPublic", "kind": "variable", "scope": "AuthResponse", "scopeKind": "class"}], "hash": "1ae99fc4eb8c679bb107f63c73f7c458", "format-version": 4, "code-base-name": "music_player_backend", "filename": "music_player_backend/src/api/routers/users.py", "fields": [{"name": "str access_token", "scope": "AuthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str display_name", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "security = HTTPBearer(auto_error=False)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token_type", "scope": "AuthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "UserPublic user", "scope": "AuthResponse", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"14": ""}]}