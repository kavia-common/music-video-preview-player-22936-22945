{"is_source_file": true, "format": "Python", "description": "This source file defines FastAPI routes related to music playback controls such as get state, play, pause, and skip. It manages playback state information and interacts with external storage for track data and user context.", "external_files": ["../storage/memory", "./users"], "external_methods": ["playback_state", "db_tracks", "get_current_user"], "published": ["router"], "classes": [{"name": "PlaybackState", "description": "A Pydantic model representing the playback status, including whether it's playing, current track ID, and position in milliseconds."}], "methods": [{"name": "_ensure_track(track_id: Optional[str])", "description": "Checks if the given track ID exists in the database, raises 404 HTTPException if not.", "scope": "", "scopeKind": ""}, {"name": "get_state(user: UserPublic = Depends(get_current_user))", "description": "Retrieves the current playback state for the authenticated user.", "scope": "", "scopeKind": ""}, {"name": "play(track_id: Optional[str] = None, user: UserPublic = Depends(get_current_user))", "description": "Starts or resumes playback, optionally switching to a specified track.", "scope": "", "scopeKind": ""}, {"name": "pause(user: UserPublic = Depends(get_current_user))", "description": "Pauses the current playback.", "scope": "", "scopeKind": ""}, {"name": "skip(track_id: str, user: UserPublic = Depends(get_current_user))", "description": "Skips to a different track by ID and starts playing it.", "scope": "", "scopeKind": ""}], "calls": ["get_current_user", "playback_state.get", "playback_state.__setitem__", "HTTPException", "PlaybackState"], "search-terms": ["music playback API", "playback state routes", "track control endpoints", "FastAPI music router", "playback control", "track validation"], "state": 2, "file_id": 8, "knowledge_revision": 18, "git_revision": "", "ctags": [{"_type": "tag", "name": "PlaybackState", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^class PlaybackState(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_ensure_track", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^def _ensure_track(track_id: Optional[str]):$/", "language": "Python", "kind": "function", "signature": "(track_id: Optional[str])"}, {"_type": "tag", "name": "current_track_id", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^    current_track_id: Optional[str] = Field(None, description=\"Currently selected track ID\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PlaybackState", "scopeKind": "class"}, {"_type": "tag", "name": "get_state", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^def get_state(user: UserPublic = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user: UserPublic = Depends(get_current_user))"}, {"_type": "tag", "name": "is_playing", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^    is_playing: bool = Field(..., description=\"Whether playback is active\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "PlaybackState", "scopeKind": "class"}, {"_type": "tag", "name": "pause", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^def pause(user: UserPublic = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user: UserPublic = Depends(get_current_user))"}, {"_type": "tag", "name": "play", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^def play(track_id: Optional[str] = None, user: UserPublic = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(track_id: Optional[str] = None, user: UserPublic = Depends(get_current_user))"}, {"_type": "tag", "name": "position_ms", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^    position_ms: int = Field(0, description=\"Playback position in milliseconds\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "PlaybackState", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "skip", "path": "/home/kavia/workspace/code-generation/music-video-preview-player-22936-22945/music_player_backend/src/api/routers/playback.py", "pattern": "/^def skip(track_id: str, user: UserPublic = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(track_id: str, user: UserPublic = Depends(get_current_user))"}], "hash": "479b5636e3c6cec3396c7e20b0d0baf2", "format-version": 4, "code-base-name": "music_player_backend", "filename": "music_player_backend/src/api/routers/playback.py", "fields": [{"name": "Optional[str] current_track_id", "scope": "PlaybackState", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_playing", "scope": "PlaybackState", "scopeKind": "class", "description": "unavailable"}, {"name": "int position_ms", "scope": "PlaybackState", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"18": ""}]}